<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Mudit's Tea Corner</title>

<!-- Theme colors for mobile -->
<meta name="theme-color" content="#710">

<!-- Tailwind CDN -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Custom CSS -->
<link rel="stylesheet" href="style.css">

<!-- PWA meta -->
<link rel="manifest" href="#manifest-inline">
</head>
<body class="bg-purple-50 text-violet-900">

<header class="bg-green text-orange py-6">
  <div class="px-5 max-w-xl mx-auto text-center">
    <h1 class="text-2xl font-italic">Mudit’s Tea Corner</h1>
    <p class="mt-1 text-sm opacity-20">Best chai in town</p>
  </div>
</header>

<main class="px-5 py-6 max-w-xl mx-auto space-y-5">

  <!-- Hero & quick actions -->
  <section class="card flex items-start gap-4">
    <img src="https://images.pexels.com/photos/674010/pexels-photo-674010.jpeg?cs=srgb&dl=pexels-anjana-c-169994-674010.jpg&fm=jpg" alt="Shop front" class="w-28 h-28 snap-item">
    <div class="flex-1">
      <h2 class="text-lg font-semibold">Sharma’s Tea Corner</h2>
      <p class="text-sm mt-1 text-blue-700">12 Market Road, Jaipur</p>
      <div class="mt-3 flex flex-wrap gap-2">
        <a class="btn btn-cyan" href="tel:+911234567890">📞 Call</a>
        <a class="btn" style="background:#25D366;color:#eaf"
           href="https://wa.me/911234567890?text=Hi Sharma's Tea Corner!" target="_blank">💬 WhatsApp</a>
        <a class="btn btn-pink" target="_blank"
           href="https://maps.google.com/?q=12+Market+Road+Jaipur">🗺️ Map</a>
        <a class="btn btn-red" href="mailto:sharmastea@gmail.com">✉️ Email</a>
        <button id="shareBtn" class="btn btn-yellow">🔗 Share</button>
      </div>
    </div>
  </section>

  <!-- Opening Hours -->
  <section class="card">
    <h3 class="font-semiitalic">🕒 Opening Hours</h3>
    <p class="mt-1 text-sm text-indigo-700">Mon-Sat: 7AM - 9PM</p>
    <p class="text-sm text-magenta-700">Sun: 8AM - 5PM</p>
  </section>

  <!-- Gallery -->
  <section class="card">
    <h3 class="font-semibold px-2">📸 Gallery</h3>
    <div class="snap-x mt-2 px-2 py-2" id="gallery">
      <img class="snap-item w-48 h-32" src="https://images.pexels.com/photos/674010/pexels-photo-674010.jpeg?cs=srgb&dl=pexels-anjana-c-169994-674010.jpg&fm=jpg" alt="Shop photo">
      <img class="snap-item w-48 h-32" src="https://images.pexels.com/photos/674010/pexels-photo-674010.jpeg?cs=srgb&dl=pexels-anjana-c-169994-674010.jpg&fm=jpg" alt="Shop photo">
      <img class="snap-item w-48 h-32" src="https://images.pexels.com/photos/674010/pexels-photo-674010.jpeg?cs=srgb&dl=pexels-anjana-c-169994-674010.jpg&fm=jpg" alt="Shop photo">
    </div>
    <p class="text-xs text-pink-500 mt-1 px-2">Swipe to see more</p>
  </section>

  <!-- Share / Cloud save -->
  <section class="card">
    <h4 class="font-semibold">Share & Save</h4>
    <div class="mt-2 flex flex-wrap gap-2">
      <button id="copyBtn" class="btn btn-yellow">📋 Copy Link</button>
      <button id="saveRemote" class="btn btn-cyan">💾 Save to Cloud</button>
    </div>
  </section>

</main>

<footer class="text-center text-sm text-blue-600 py-5">
  © <span id="year"></span> Mudit's Tea Corner
</footer>

<!-- Scripts -->
<script type="module">
  document.getElementById('year').textContent = new Date().getFullYear();
  const business = { name:"Sharma's Tea Corner", phone:"+911234567890", email:"sharmastea@gmail.com", address:"12 Market Road, Jaipur", website:location.href };

  // Share button
  document.getElementById('shareBtn').addEventListener('click', async () => {
    if(navigator.share){ navigator.share({ title:business.name, text:business.address, url:business.website }).catch(console.log); return; }
    alert('Share not supported on this browser.');
  });

  // Copy link
  document.getElementById('copyBtn').addEventListener('click', async ()=>{
    try{ await navigator.clipboard.writeText(business.website); alert('Link copied!'); } catch(e){ alert('Copy failed'); }
  });

  // Firebase inline example
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-firestore.js";
  import { getStorage, ref, listAll, getDownloadURL } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-storage.js";

  const firebaseConfig = {
    apiKey:"YOUR-API-KEY",
    authDomain:"YOUR-PROJECT.firebaseapp.com",
    projectId:"YOUR-PROJECT-ID",
    storageBucket:"YOUR-PROJECT.appspot.com",
    messagingSenderId:"SENDER-ID",
    appId:"APP-ID"
  };
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const storage = getStorage(app);

  document.getElementById('saveRemote').addEventListener('click', async ()=>{
    try{ await addDoc(collection(db,'businesses'), {...business, savedAt:new Date().toISOString()}); alert('Saved to Cloud!'); }
    catch(e){ console.error(e); alert('Cloud save failed.'); }
  });

  // Dynamic gallery load from Firebase Storage
  const galleryContainer = document.getElementById('gallery');
  async function loadGallery(){
    try{
      const listRef = ref(storage,'gallery');
      const res = await listAll(listRef);
      const urls = await Promise.all(res.items.map(item=>getDownloadURL(item)));
      galleryContainer.innerHTML='';
      urls.forEach(url=>{
        const img = document.createElement('img');
        img.src = url; img.className='snap-item w-48 h-32'; img.alt='Shop photo';
        galleryContainer.appendChild(img);
      });
    } catch(e){ console.log('Gallery load failed',e); }
  }
  loadGallery();

  // Register PWA service worker
  if('serviceWorker' in navigator){ navigator.serviceWorker.register('sw.js').then(()=>console.log('SW registered')).catch(console.warn);}
</script>

</body>
</html>
